# Infrastructure Diagrams - Day 6 Terraform State Challenge

This directory contains Python scripts that generate visual infrastructure diagrams based on the Terraform configurations used in Day 6 of the 30-Day Terraform Challenge.

## Overview

The diagrams illustrate the infrastructure components and Terraform state management setup, including:

1. **Basic Infrastructure**: VPC, subnets, security groups, and networking components
2. **Remote State Management**: S3 bucket and DynamoDB table for state storage and locking
3. **Complete Infrastructure Overview**: Combined view of all components
4. **Terraform Lifecycle**: Workflow and state interaction patterns

## Prerequisites

- Python 3.7+
- `diagrams` library installed: `pip install diagrams`
- Graphviz (automatically installed with diagrams)

## Files Description

### Python Scripts

| Script | Description | Generated Diagrams |
|--------|-------------|-------------------|
| `basic_infrastructure_diagram.py` | Basic AWS infrastructure components | `basic_infrastructure.png` |
| `remote_state_diagram.py` | Remote state setup and workflow | `remote_state_infrastructure.png`, `terraform_state_workflow.png` |
| `complete_overview_diagram.py` | Complete infrastructure overview | `complete_infrastructure_overview.png`, `terraform_lifecycle.png` |
| `generate_all_diagrams.py` | Master script to generate all diagrams | All PNG files |

### Generated Diagrams

1. **basic_infrastructure.png**
   - VPC structure (10.0.0.0/16)
   - Public subnet (10.0.1.0/24)
   - Internet Gateway
   - Route table associations
   - Security group configuration

2. **remote_state_infrastructure.png**
   - S3 bucket for state storage
   - DynamoDB table for state locking
   - IAM permissions and security
   - Client-to-backend connections

3. **terraform_state_workflow.png**
   - Terraform command lifecycle
   - State file interactions
   - Locking mechanism workflow

4. **complete_infrastructure_overview.png**
   - Combined view of infrastructure and state management
   - Developer workflow integration
   - Complete system architecture

5. **terraform_lifecycle.png**
   - Detailed Terraform command lifecycle
   - State versioning and backup
   - Resource management flow

## Usage

### Generate All Diagrams
```bash
# Navigate to the infrastructure directory
cd Day6/Submissions/MaVeN-13TTN/infrastructure

# Run the master script
python generate_all_diagrams.py
```

### Generate Individual Diagrams
```bash
# Basic infrastructure only
python basic_infrastructure_diagram.py

# Remote state diagrams only
python remote_state_diagram.py

# Complete overview diagrams only
python complete_overview_diagram.py
```

## Terraform Configuration Reference

The diagrams are based on the following Terraform configurations:

### Basic Infrastructure (`terraform/basic-infra/`)
- **VPC**: 10.0.0.0/16 CIDR block
- **Public Subnet**: 10.0.1.0/24 in us-east-1a
- **Internet Gateway**: For internet connectivity
- **Route Table**: Public routing configuration
- **Security Group**: Web server security rules (HTTP/SSH)

### Remote State (`terraform/remote-state/`)
- **S3 Bucket**: Terraform state storage with versioning and encryption
- **DynamoDB Table**: State locking with LockID hash key
- **Security**: Public access blocking and server-side encryption

## Diagram Features

### Visual Elements
- **Clusters**: Logical grouping of related resources
- **Edge Labels**: Connection descriptions and purposes
- **Color Coding**: Different types of connections (data flow, management, security)
- **Icons**: AWS service-specific icons for easy identification

### Layout Directions
- **Top-Bottom (TB)**: For hierarchical views
- **Left-Right (LR)**: For workflow and process diagrams

## Customization

To modify the diagrams:

1. Edit the respective Python script
2. Adjust cluster arrangements, edge labels, or visual styling
3. Run the script to regenerate the diagram
4. PNG files are automatically updated

## Error Handling

The scripts include error handling for:
- Missing dependencies
- Import errors
- File generation issues
- Path resolution problems

## Integration with Day 6 Documentation

These diagrams complement the Day 6 documentation and provide visual context for:
- Infrastructure architecture decisions
- State management strategy
- Team collaboration workflows
- Security and access patterns

---

**Generated by**: MaVeN-13TTN  
**Date**: June 2, 2025  
**Challenge**: 30-Day Terraform Challenge - Day 6
